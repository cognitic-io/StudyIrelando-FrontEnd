{"ast":null,"code":"import _classCallCheck from \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/src/pages/product/ProductContainer.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Row, Col, Card, CardBody } from \"reactstrap\";\nimport { getLoggedInUser } from \"../../helpers/authUtils\";\nimport Loader from \"../../components/Loader\";\nimport ProductService from \"../../services/ProductService\";\nimport ProductList from \"./List/ProductList\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\n\nvar ProductContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductContainer, _Component);\n\n  function ProductContainer(props) {\n    var _this;\n\n    _classCallCheck(this, ProductContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductContainer).call(this, props));\n\n    _this.hideAlert = function () {\n      // console.log(\"Hiding alert...\");\n      _this.setState({\n        alert: null\n      });\n    };\n\n    _this.deleteFile = function () {\n      var _id = _this.state.id;\n      var token = _this.state.user.token;\n      var product = {\n        _id: _id,\n        published: false\n      };\n      console.log(\"deleteFile\", product);\n      ProductService.updatePublishedProduct(token, product).then(function (res) {\n        _this.getProducts();\n      }).catch(function (err) {\n        _this.getProducts();\n\n        alert(\"Something wrong happen when we tried to remove this Product.\");\n      });\n\n      _this.setState({\n        alert: React.createElement(SweetAlert, {\n          success: true,\n          title: \"Deleted\",\n          onConfirm: _this.hideAlert,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Success to remove the Product\"),\n        id: \"\"\n      });\n    };\n\n    _this.onCancelDelete = function () {\n      _this.setState({\n        alert: React.createElement(SweetAlert, {\n          danger: true,\n          title: \"Cancelled\",\n          onConfirm: _this.hideAlert,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"Product is still available\")\n      });\n    };\n\n    _this.state = {\n      user: getLoggedInUser(),\n      products: []\n    };\n    _this.deleteThisGoal = _this.deleteThisGoal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ProductContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getProducts();\n    }\n  }, {\n    key: \"getProducts\",\n    value: function getProducts() {\n      var _this2 = this;\n\n      var token = this.state.user.token;\n      ProductService.getProducts(token).then(function (response) {\n        _this2.setState({\n          products: response.data.result\n        });\n      }).catch(function (error) {\n        return _this2.setState({\n          error: error\n        });\n      });\n    } //delete product\n\n  }, {\n    key: \"deleteThisGoal\",\n    value: function deleteThisGoal(id) {\n      var _this3 = this;\n\n      var getAlert = function getAlert() {\n        return React.createElement(SweetAlert, {\n          warning: true,\n          showCancel: true,\n          confirmBtnText: \"Would you like to remove this Product?\",\n          cancelBtnText: \"Cancel\",\n          confirmBtnBsStyle: \"danger\",\n          cancelBtnBsStyle: \"default\",\n          title: \"Are you sure that you want to remove this Product?\",\n          onConfirm: _this3.deleteFile,\n          onCancel: _this3.onCancelDelete,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        });\n      };\n\n      this.setState({\n        alert: getAlert(),\n        id: id\n      });\n    }\n  }, {\n    key: \"onConfirmModal\",\n    value: function onConfirmModal(id) {\n      this.deleteFile(id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var products = this.state.products;\n      return React.createElement(\"section\", {\n        className: \"product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, this.props.loading && React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-title-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 7,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"page-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Welcome, \", this.state.user.firstName)), React.createElement(Col, {\n        lg: 5,\n        className: \"mt-lg-3 mt-md-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }))))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Products\")), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(ProductList, {\n        products: products,\n        deleteProduct: this.deleteThisGoal,\n        updateProduct: this.updateProduct,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }))))), this.state.alert);\n    }\n  }]);\n\n  return ProductContainer;\n}(Component);\n\nexport default connect()(ProductContainer);","map":{"version":3,"sources":["/Users/Raian/Documents/raian-dev/Vegan-FrontEnd/src/pages/product/ProductContainer.js"],"names":["React","Component","connect","Row","Col","Card","CardBody","getLoggedInUser","Loader","ProductService","ProductList","SweetAlert","ProductContainer","props","hideAlert","setState","alert","deleteFile","_id","state","id","token","user","product","published","console","log","updatePublishedProduct","then","res","getProducts","catch","err","onCancelDelete","products","deleteThisGoal","bind","response","data","result","error","getAlert","loading","firstName","updateProduct"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Row, Col, Card, CardBody } from \"reactstrap\";\n\nimport { getLoggedInUser } from \"../../helpers/authUtils\";\nimport Loader from \"../../components/Loader\";\n\nimport ProductService from \"../../services/ProductService\";\nimport ProductList from \"./List/ProductList\";\n\nimport SweetAlert from \"react-bootstrap-sweetalert\";\n\nclass ProductContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: getLoggedInUser(),\n      products: []\n    };\n    this.deleteThisGoal = this.deleteThisGoal.bind(this);\n  }\n\n  componentDidMount() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    const { token } = this.state.user;\n    ProductService.getProducts(token)\n      .then(response => {\n        this.setState({ products: response.data.result });\n      })\n      .catch(error => this.setState({ error }));\n  }\n\n  //delete product\n  deleteThisGoal(id) {\n    const getAlert = () => (\n      <SweetAlert\n        warning\n        showCancel\n        confirmBtnText=\"Would you like to remove this Product?\"\n        cancelBtnText=\"Cancel\"\n        confirmBtnBsStyle=\"danger\"\n        cancelBtnBsStyle=\"default\"\n        title=\"Are you sure that you want to remove this Product?\"\n        onConfirm={this.deleteFile}\n        onCancel={this.onCancelDelete}\n      >\n        {/* Você não  */}\n      </SweetAlert>\n    );\n\n    this.setState({\n      alert: getAlert(),\n      id: id\n    });\n  }\n\n  hideAlert = () => {\n    // console.log(\"Hiding alert...\");\n    this.setState({\n      alert: null\n    });\n  };\n\n  deleteFile = () => {\n    let _id = this.state.id;\n    const { token } = this.state.user;\n\n    let product = {\n      _id,\n      published: false\n    };\n\n    console.log(\"deleteFile\", product);\n\n    ProductService.updatePublishedProduct(token, product)\n      .then(res => {\n        this.getProducts();\n      })\n      .catch(err => {\n        this.getProducts();\n        alert(\"Something wrong happen when we tried to remove this Product.\");\n      });\n    this.setState({\n      alert: (\n        <SweetAlert success title=\"Deleted\" onConfirm={this.hideAlert}>\n          Success to remove the Product\n        </SweetAlert>\n      ),\n      id: \"\"\n    });\n  };\n\n  onCancelDelete = () => {\n    this.setState({\n      alert: (\n        <SweetAlert danger title=\"Cancelled\" onConfirm={this.hideAlert}>\n          Product is still available\n        </SweetAlert>\n      )\n    });\n  };\n\n  onConfirmModal(id) {\n    this.deleteFile(id);\n  }\n\n  render() {\n    const { products } = this.state;\n    return (\n      <section className=\"product\">\n        {/* preloader */}\n        {this.props.loading && <Loader />}\n        <Row>\n          <Col>\n            <div className=\"page-title-box\">\n              <Row>\n                <Col lg={7}>\n                  <h4 className=\"page-title\">\n                    Welcome, {this.state.user.firstName}\n                  </h4>\n                </Col>\n                <Col lg={5} className=\"mt-lg-3 mt-md-0\"></Col>\n              </Row>\n            </div>\n          </Col>\n        </Row>\n        <Row>\n          <Col lg={12}>\n            <Card>\n              <CardBody>\n                <h3>Products</h3>\n              </CardBody>\n              <Row>\n                <ProductList\n                  products={products}\n                  deleteProduct={this.deleteThisGoal}\n                  updateProduct={this.updateProduct}\n                />\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n        {this.state.alert}\n      </section>\n    );\n  }\n}\n\nexport default connect()(ProductContainer);\n"]},"metadata":{},"sourceType":"module"}